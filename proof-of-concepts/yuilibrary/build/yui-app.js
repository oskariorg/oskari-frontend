/* This is a packed Oskari app (bundle script version Thu May 31 2012 11:30:12 GMT+0300 (Suomen kesäaika)) */ 
/* This is a packed Oskari bundle (bundle script version Thu May 31 2012 11:30:12 GMT+0300 (Suomen kesäaika)) */ 
Oskari.clazz.define("Oskari.tools.Yui",function(){this.bundle_manager=Oskari.bundle_manager;this.excludeTags={mapframework:true},this.langs={fi:true,sv:true,en:true},this.flushPackFiles()},{flushPackFiles:function(){this.packedFiles=[];this.packedLocales={};for(l in this.langs){this.packedLocales[l]=[]}},setExcludeTags:function(a){this.excludeTags=a},getBundleTags:function(a){return this.bundle_manager.stateForBundleDefinitions[a].metadata.manifest["Bundle-Tag"]||{}},shallExclude:function(a){var b=this;var c=b.excludeTags;for(p in a){if(c[p]){return true}}return false},defaultCompressorJar:'"../tools/bundle/yui/yuicompressor-2.4.6.jar"',yui_command_line:function(j,k,g){var i=this;var c=i.bundle_manager.sources[j];var m="";m+="md build\n";var f="bundle.js";m+="java -jar "+k+" --charset UTF-8 --line-break 4096 --type js "+f+" > build/bundle-yui.js\n";m+="echo /* This is a packed Oskari bundle (bundle script version "+(new Date())+") */ > build/yui.js\n";m+="echo /* This is a unpacked Oskari bundle (bundle script version "+(new Date())+") */ > build/yui-pack.js\n";for(var d=0;d<c.scripts.length;d++){var b=c.scripts[d];var a=new String(b.src);var e="text/javascript"==b.type?"js":"css";if("css"==e){continue}while(a.indexOf("/")!=-1){a=a.replace("/","\\")}m+='type "'+a+'" >> build/yui-pack.js\n'}m+="java -jar "+k+" --charset UTF-8 --line-break 4096 --type js build/yui-pack.js >> build/yui.js\n";this.packedFiles.push(g+"/build/yui.js");for(l in this.langs){if(!this.langs[l]){continue}m+="echo /* This is a unpacked Oskari bundle (bundle script version "+(new Date())+") */ > build/yui-pack-locale-"+l+".js\n"}if(c.locales){for(var d=0;d<c.locales.length;d++){var b=c.locales[d];var h=b.lang;var a=new String(b.src);var e="text/javascript"==b.type?"js":"css";if("css"==e){continue}while(a.indexOf("/")!=-1){a=a.replace("/","\\")}m+='type "'+a+'" >> build/yui-pack-locale-'+h+".js\n"}}for(l in this.langs){if(!this.langs[l]){continue}m+="java -jar "+k+" --charset UTF-8 --line-break 4096 --type js build/yui-pack-locale-"+l+".js >> build/yui-locale-"+l+".js\n";this.packedLocales[l].push(g+"/build/yui-locale-"+l+".js")}return m},yui_command_lines:function(a){var d=this;var c={};for(bndlName in d.bundle_manager.sources){var f=d.getBundleTags(bndlName);if(d.shallExclude(f)){continue}var b=Oskari.bundle_manager.stateForBundleDefinitions[bndlName].bundlePath;var e="";e+='pushd "'+b+'"\n';e+=d.yui_command_line(bndlName,a,b);e+="popd\n";c[bndlName]=e}return c},yui_command_line_for_app:function(h){var g=this;g.flushPackFiles();var f="SET CURRENT=%CD%\n";var d="SET YUICOMPRESSOR=%CURRENT%/"+this.defaultCompressorJar+"\n";var e=g.yui_command_lines(h);var c="";for(p in e){c+=e[p]}var i="";i+="md build\n";i+="echo /* This is a packed Oskari app (bundle script version "+(new Date())+") */ > build/yui-app.js\n";for(var b=0;b<this.packedFiles.length;b++){var a=this.packedFiles[b];while(a.indexOf("/")!=-1){a=a.replace("/","\\")}i+='type "'+a+'" >> build/yui-app.js\n'}for(l in this.langs){i+="echo /* This is a packed Oskari locale for app (bundle script version "+(new Date())+") */ > build/yui-app-locale-"+l+".js\n";for(var b=0;b<this.packedLocales[l].length;b++){var a=this.packedLocales[l][b];while(a.indexOf("/")!=-1){a=a.replace("/","\\")}i+='type "'+a+'" >> build/yui-app-locale-'+l+".js\n"}}return f+d+c+i},showYuiBuildCmd:function(){var a=this.yui_command_line_for_app("%YUICOMPRESSOR%");var b=window.open();b.document.write('<body ><pre style="font: 9pt Verdana;">'+a+"</body></pre>")}});/* This is a packed Oskari bundle (bundle script version Thu May 31 2012 11:30:12 GMT+0300 (Suomen kesäaika)) */ 
Oskari.clazz.define("Oskari.poc.oskari.bundle.MapPublisherBundleInstance",function(){this.map=null;this.core=null;this.sandbox=null;this.mapmodule=null;this.started=false;this.plugins={}},{__name:"Oskari.poc.oskari.bundle.MapPublisherBundleInstance",getName:function(){return this.__name},getSandbox:function(){return this.sandbox},start:function(){if(this.started){return}this.started=true;var a=Oskari.$("sandbox");this.sandbox=a;a.register(this);for(p in this.eventHandlers){a.registerForEventByName(this,p)}var b=a.getRequestBuilder("userinterface.AddExtensionRequest")(this);a.request(this,b)},init:function(){return null},update:function(){},afterChangeMapLayerOpacityEvent:function(a){},onEvent:function(b){var a=this.eventHandlers[b.getName()];if(!a){return}return a.apply(this,[b])},eventHandlers:{},stop:function(){var a=this.sandbox;for(p in this.eventHandlers){a.unregisterFromEventByName(this,p)}var b=a.getRequestBuilder("userinterface.RemoveExtensionRequest")(this);a.request(this,b);this.sandbox.unregister(this);this.started=false},setSandbox:function(a){this.sandbox=null},startExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=Oskari.clazz.create("Oskari.poc.oskari.mappublisher.Flyout",this);this.plugins["Oskari.userinterface.Tile"]=Oskari.clazz.create("Oskari.poc.oskari.mappublisher.Tile",this)},stopExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=null;this.plugins["Oskari.userinterface.Tile"]=null},getTitle:function(){return"Layer Selection"},getDescription:function(){return"Sample"},getPlugins:function(){return this.plugins}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Extension"]});Oskari.clazz.define("Oskari.poc.oskari.mappublisher.Flyout",function(a){this.instance=a;this.container=null;this.template=null;this.state=null;this.mapmodule=null;this.map=null},{getName:function(){return"Oskari.poc.oskari.mappublisher.Flyout"},setEl:function(c,b,a){this.container=$(c)},startPlugin:function(){var d=this;this.template=$('<div style="border:2pt dashed grey; margin:0; padding:0; height:400px;width:540px;" class="mappublisher"><div style="position:relative;border:2pt solid black;left: 10px; top:10px; height:95%;width:95%;" class="map"></div></div>');var b=d.instance.getSandbox();this.createMapModule();var a=this.mapmodule;var e=this.map;var c=b.getMap();e.setCenter(new OpenLayers.LonLat(c.getX(),c.getY()),c.getZoom(),false);this.refresh();a.start(b);a.updateCurrentState()},stopPlugin:function(){var c=this;var a=this.mapmodule;var b=c.instance.getSandbox();a.stop(b);b.unregister(c.mapmodule);this.container.empty()},getTitle:function(){return"Valitut karttatasot"},getDescription:function(){},getOptions:function(){},setState:function(a){this.state=a;console.log("Flyout.setState",this,a)},refresh:function(){var b=this.container;var a=this.template;var e=a.clone();e.appendTo(b);var c=e.children(".map");var d=this.map;d.render(c[0]);RightJS.$(e[0]).makeResizable()},createMapModule:function(){var h=this;var k=h.instance.getSandbox();var l=false;var j=false;var c=false;var d=true;var b=Oskari.clazz.create("Oskari.mapframework.ui.module.common.MapModule","MapPubslizer",l,j,c,d);b.setStealth(true);this.mapmodule=b;var a=k.register(b);var e=[];e.push("Oskari.mapframework.bundle.mapmodule.plugin.LayersPlugin");e.push("Oskari.mapframework.mapmodule.WmsLayerPlugin");e.push("Oskari.mapframework.mapmodule.ControlsPlugin");for(var f=0;f<e.length;f++){var g=Oskari.clazz.create(e[f]);b.registerPlugin(g)}a.addControl(new OpenLayers.Control.TouchNavigation({dragPanOptions:{enableKinetic:true}}));this.map=a}},{protocol:["Oskari.userinterface.Flyout"]});Oskari.clazz.define("Oskari.poc.oskari.mappublisher.Tile",function(a){this.instance=a;this.container=null;this.template=null},{getName:function(){return"Oskari.poc.oskari.mappublisher.Tile"},setEl:function(c,b,a){this.container=$(c)},startPlugin:function(){this.refresh()},stopPlugin:function(){this.container.empty()},getTitle:function(){return"Julkaise kartta"},getDescription:function(){},getOptions:function(){},setState:function(a){console.log("Tile.setState",this,a)
},refresh:function(){var d=this;var a=d.instance;var c=this.container;var b=this.template}},{protocol:["Oskari.userinterface.Tile"]});/* This is a packed Oskari bundle (bundle script version Thu May 31 2012 11:30:12 GMT+0300 (Suomen kesäaika)) */ 
Oskari.clazz.define("Oskari.poc.yuilibrary.bundle.LayerSelectorBundleInstance",function(){this.map=null;this.core=null;this.sandbox=null;this.mapmodule=null;this.started=false;this.template=null;this.plugins={};this.yuilibrary=null},{__name:"YUILibraryLayerSelector",getName:function(){return this.__name},getSandbox:function(){return this.sandbox},start:function(){var c=this;if(c.started){return}c.started=true;var a=Oskari.$("sandbox");c.sandbox=a;a.register(c);for(p in c.eventHandlers){a.registerForEventByName(c,p)}var b=a.getRequestBuilder("userinterface.AddExtensionRequest")(this);a.request(this,b);c.mediator.bundle.require(function(d){c.yuilibrary=d;c.refresh()})},init:function(){return null},update:function(){},afterChangeMapLayerOpacityEvent:function(a){},onEvent:function(b){var a=this.eventHandlers[b.getName()];if(!a){return}return a.apply(this,[b])},eventHandlers:{AfterMapMoveEvent:function(a){}},stop:function(){var a=this.sandbox();for(p in this.eventHandlers){a.unregisterFromEventByName(this,p)}var b=a.getRequestBuilder("userinterface.RemoveExtensionRequest")(this);a.request(this,b);this.sandbox.unregister(this);this.started=false},setSandbox:function(a){this.sandbox=null},startExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=Oskari.clazz.create("Oskari.poc.yuilibrary.layerselector.Flyout",this);this.plugins["Oskari.userinterface.Tile"]=Oskari.clazz.create("Oskari.poc.yuilibrary.layerselector.Tile",this)},stopExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=null;this.plugins["Oskari.userinterface.Tile"]=null},getTitle:function(){return"Layer Selection"},getDescription:function(){return"Sample"},getPlugins:function(){return this.plugins},refresh:function(){var a=this;if(!a.yuilibrary){return}this.plugins["Oskari.userinterface.Flyout"].setYUILibrary(a.yuilibrary);this.plugins["Oskari.userinterface.Flyout"].refresh();this.plugins["Oskari.userinterface.Tile"].setYUILibrary(a.yuilibrary);this.plugins["Oskari.userinterface.Tile"].refresh()}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Extension"]});Oskari.clazz.define("Oskari.poc.yuilibrary.layerselector.Flyout",function(a){this.instance=a;this.container=null;this.template=null;this.state=null;this.yuilibrary=null},{setYUILibrary:function(a){this.yuilibrary=a},getName:function(){return"Oskari.poc.yuilibrary.layerselector.Flyout"},setEl:function(c,b,a){this.container=c[0]},startPlugin:function(){},stopPlugin:function(){},getTitle:function(){return"Valitut karttatasot"},getDescription:function(){},getOptions:function(){},setState:function(a){this.state=a;console.log("Flyout.setState",this,a)},refresh:function(){var e=this;var b=e.yuilibrary;var d=e.template;if(!d){d=b.Node.create('<div class="layerselector"></div>');e.template=d}var f=b.one(this.container);var d=this.template;var h=e.instance.getSandbox();var a=h.getRequestBuilder("ChangeMapLayerOpacityRequest");var c=h.findAllSelectedMapLayers();f.empty();var g=d.cloneNode(true);var i=new b.TabView({children:[{label:"foo",content:"<div><p>foo content</p></div><div><p>foo content</p></div><div><p>foo content</p></div>"},{label:"bar",content:"<div><p>bar content</p></div><div><p>bar content</p></div><div><p>bar content</p></div>"},{label:"baz",content:"<div><p>baz content</p></div><div><p>baz content</p></div><div><p>baz content</p></div>"}]});i.render(g);f.appendChild(g)}},{protocol:["Oskari.userinterface.Flyout"]});Oskari.clazz.define("Oskari.poc.yuilibrary.layerselector.Tile",function(a){this.instance=a;this.container=null;this.template=null;this.yuilibrary=null},{setYUILibrary:function(a){this.yuilibrary=a},getName:function(){return"Oskari.poc.yuilibrary.layerselector.Tile"},setEl:function(c,b,a){this.container=$(c)},startPlugin:function(){this.refresh()},stopPlugin:function(){this.container.empty()},getTitle:function(){return"Karttatasot"},getDescription:function(){},getOptions:function(){},setState:function(a){console.log("Tile.setState",this,a)},refresh:function(){var f=this;var a=f.instance;var e=this.container;var d=this.template;
var c=a.getSandbox();var b=e.children(".oskari-tile-status")}},{protocol:["Oskari.userinterface.Tile"]});/* This is a packed Oskari bundle (bundle script version Thu May 31 2012 11:30:12 GMT+0300 (Suomen kesäaika)) */ 
Oskari.clazz.define("Oskari.poc.yuilibrary.bundle.FeatureInfoBundleInstance",function(){this.map=null;this.core=null;this.sandbox=null;this.mapmodule=null;this.started=false;this.template=null;this.plugins={};this.yuilibrary=null},{__name:"YUILibraryFeatureInfo",getName:function(){return this.__name},getSandbox:function(){return this.sandbox},start:function(){var c=this;if(c.started){return}c.started=true;var a=Oskari.$("sandbox");c.sandbox=a;a.register(c);for(p in c.eventHandlers){a.registerForEventByName(c,p)}var b=a.getRequestBuilder("userinterface.AddExtensionRequest")(this);a.request(this,b);c.mediator.bundle.require(function(d){c.yuilibrary=d;c.refresh()})},init:function(){return null},update:function(){},afterChangeMapLayerOpacityEvent:function(a){},onEvent:function(b){var a=this.eventHandlers[b.getName()];if(!a){return}return a.apply(this,[b])},eventHandlers:{AfterMapLayerAddEvent:function(a){this.refresh()},AfterMapLayerRemoveEvent:function(a){this.refresh()},AfterMapMoveEvent:function(a){},AfterChangeMapLayerOpacityEvent:function(a){if(this.sandbox.getObjectCreator(a)!=this.getName()){this.afterChangeMapLayerOpacityEvent(a)}}},stop:function(){var a=this.sandbox();for(p in this.eventHandlers){a.unregisterFromEventByName(this,p)}var b=a.getRequestBuilder("userinterface.RemoveExtensionRequest")(this);a.request(this,b);this.sandbox.unregister(this);this.started=false},setSandbox:function(a){this.sandbox=null},startExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=Oskari.clazz.create("Oskari.poc.yuilibrary.featureinfo.Flyout",this);this.plugins["Oskari.userinterface.Tile"]=Oskari.clazz.create("Oskari.poc.yuilibrary.featureinfo.Tile",this)},stopExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=null;this.plugins["Oskari.userinterface.Tile"]=null},getTitle:function(){return"Layer Selection"},getDescription:function(){return"Sample"},getPlugins:function(){return this.plugins},refresh:function(){var a=this;if(!a.yuilibrary){return}this.plugins["Oskari.userinterface.Flyout"].setYUILibrary(a.yuilibrary);this.plugins["Oskari.userinterface.Flyout"].refresh();this.plugins["Oskari.userinterface.Tile"].setYUILibrary(a.yuilibrary);this.plugins["Oskari.userinterface.Tile"].refresh()}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Extension"]});Oskari.clazz.define("Oskari.poc.yuilibrary.featureinfo.Flyout",function(a){this.instance=a;this.container=null;this.template=null;this.state=null;this.yuilibrary=null},{setYUILibrary:function(a){this.yuilibrary=a},getName:function(){return"Oskari.poc.yuilibrary.featureinfo.Flyout"},setEl:function(c,b,a){this.container=c[0]},startPlugin:function(){},stopPlugin:function(){},getTitle:function(){return"Valitut karttatasot"},getDescription:function(){},getOptions:function(){},setState:function(a){this.state=a;console.log("Flyout.setState",this,a)},refresh:function(){var f=this;var i=f.instance.getSandbox();var c=f.yuilibrary;var d=f.template;if(!d){d=c.Node.create('<div class="grid"></div>');f.template=d}var g=c.one(this.container);g.empty();var h=d.cloneNode(true);var b="http://query.yahooapis.com/v1/public/yql?format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys",e="&q="+encodeURIComponent('select * from local.search where zip = "94089" and query = "pizza"'),a,j;a=new c.DataSource.Get({source:b});a.plug(c.Plugin.DataSourceJSONSchema,{schema:{resultListLocator:"query.results.Result",resultFields:["Title","Phone",{key:"Rating.AverageRating",parser:function(k){return isNaN(k)?"(none)":k}}]}});j=new c.DataTable.Base({columnset:["Title","Phone",{key:"Rating.AverageRating",label:"Rating"}],summary:"Pizza places near 98089",caption:"Table with JSON data from YQL"});j.plug(c.Plugin.DataTableDataSource,{datasource:a});j.plug(c.Plugin.DataTableScroll,{width:"500px",height:"400px"});j.render(h);g.appendChild(h);j.datasource.load({request:e})}},{protocol:["Oskari.userinterface.Flyout"]});Oskari.clazz.define("Oskari.poc.yuilibrary.featureinfo.Tile",function(a){this.instance=a;this.container=null;this.template=null;
this.yuilibrary=null},{setYUILibrary:function(a){this.yuilibrary=a},getName:function(){return"Oskari.poc.yuilibrary.featureinfo.Tile"},setEl:function(c,b,a){this.container=$(c)},startPlugin:function(){this.refresh()},stopPlugin:function(){this.container.empty()},getTitle:function(){return"Kohdetiedot"},getDescription:function(){},getOptions:function(){},setState:function(a){console.log("Tile.setState",this,a)},refresh:function(){var e=this;var a=e.instance;var d=this.container;var c=this.template;var b=a.getSandbox();var f=b.findAllSelectedMapLayers()}},{protocol:["Oskari.userinterface.Tile"]});/* This is a packed Oskari bundle (bundle script version Thu May 31 2012 11:30:12 GMT+0300 (Suomen kesäaika)) */ 
Oskari.clazz.define("Oskari.poc.yuilibrary.bundle.LayerSelectionBundleInstance",function(){this.map=null;this.core=null;this.sandbox=null;this.mapmodule=null;this.started=false;this.template=null;this.plugins={};this.yuilibrary=null},{__name:"YUILibraryLayerSelection",getName:function(){return this.__name},getSandbox:function(){return this.sandbox},start:function(){var c=this;if(c.started){return}c.started=true;var a=Oskari.$("sandbox");c.sandbox=a;a.register(c);for(p in c.eventHandlers){a.registerForEventByName(c,p)}var b=a.getRequestBuilder("userinterface.AddExtensionRequest")(this);a.request(this,b);c.mediator.bundle.require(function(d){c.yuilibrary=d;c.refresh()})},init:function(){return null},update:function(){},onEvent:function(b){var a=this.eventHandlers[b.getName()];if(!a){return}return a.apply(this,[b])},eventHandlers:{AfterMapLayerAddEvent:function(a){this.refresh()},AfterMapLayerRemoveEvent:function(a){this.refresh()},AfterMapMoveEvent:function(a){},AfterChangeMapLayerOpacityEvent:function(a){if(this.sandbox.getObjectCreator(a)!=this.getName()){this.plugins["Oskari.userinterface.Flyout"].updateLayer(a.getMapLayer())}}},stop:function(){var a=this.sandbox();for(p in this.eventHandlers){a.unregisterFromEventByName(this,p)}var b=a.getRequestBuilder("userinterface.RemoveExtensionRequest")(this);a.request(this,b);this.sandbox.unregister(this);this.started=false},setSandbox:function(a){this.sandbox=null},startExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=Oskari.clazz.create("Oskari.poc.yuilibrary.layerselection.Flyout",this);this.plugins["Oskari.userinterface.Tile"]=Oskari.clazz.create("Oskari.poc.yuilibrary.layerselection.Tile",this)},stopExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=null;this.plugins["Oskari.userinterface.Tile"]=null},getTitle:function(){return"Layer Selection"},getDescription:function(){return"Sample"},getPlugins:function(){return this.plugins},refresh:function(){var a=this;if(!a.yuilibrary){return}this.plugins["Oskari.userinterface.Flyout"].setYUILibrary(a.yuilibrary);this.plugins["Oskari.userinterface.Flyout"].refresh();this.plugins["Oskari.userinterface.Tile"].setYUILibrary(a.yuilibrary);this.plugins["Oskari.userinterface.Tile"].refresh()}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Extension"]});Oskari.clazz.define("Oskari.poc.yuilibrary.layerselection.Flyout",function(a){this.instance=a;this.container=null;this.template=null;this.state=null;this.yuilibrary=null;this.layercontrols={}},{setYUILibrary:function(a){this.yuilibrary=a},getName:function(){return"Oskari.poc.yuilibrary.layerselection.Flyout"},setEl:function(c,b,a){this.container=c[0]},startPlugin:function(){},stopPlugin:function(){},getTitle:function(){return"Valitut karttatasot"},getDescription:function(){},getOptions:function(){},setState:function(a){this.state=a;console.log("Flyout.setState",this,a)},updateLayer:function(b){var d=this.layercontrols[b.getId()];if(!d){return}var c=d.slider;if(!c){return}var a=b.getOpacity();c.setValue(a)},refresh:function(){var q=this;var b=q.yuilibrary;var t=q.template;if(!t){t=b.Node.create('<div class="layer selectedLayer"><div class="layer-title"><p></p></div><div class="slider"></div></div>');q.template=t}var a=b.one(this.container);a.empty();var o=b.Node.create('<div id="selectedLayerList"></div>');a.appendChild(o);var t=this.template;var d=q.instance.getSandbox();var e=d.getRequestBuilder("ChangeMapLayerOpacityRequest");var g=d.findAllSelectedMapLayers();q.layercontrols={};for(var i=0,m=g.length;i<m;i++){var r=g[i];var h=r.getId();var j=r.getOpacity();var l=t.cloneNode(true);var s=l.one(".layer-title p");s.setContent(r.getName());var f=l.one(".slider");var k=new b.Slider({min:0,max:100,value:j,length:"200px"});q.layercontrols[h]={slider:k};l.setData({sandbox:d,instance:q.instance,layerId:h});k.after("valueChange",function(x){var w=this.getData();var v=w.instance;var u=w.layerId;var n=w.sandbox;n.request(v,e(u,x.newVal))},l);k.render(f);o.appendChild(l)}if(g.length>1){var c=new b.Sortable({container:"#selectedLayerList",nodes:"div.selectedLayer",opacity:".1"});
c.on("moved",function(n){console.log("Item Moved! - "+n.drag.get("node").get("id"))})}}},{protocol:["Oskari.userinterface.Flyout"]});Oskari.clazz.define("Oskari.poc.yuilibrary.layerselection.Tile",function(a){this.instance=a;this.container=null;this.template=null;this.yuilibrary=null},{setYUILibrary:function(a){this.yuilibrary=a},getName:function(){return"Oskari.poc.yuilibrary.layerselection.Tile"},setEl:function(c,b,a){this.container=$(c)},startPlugin:function(){this.refresh()},stopPlugin:function(){this.container.empty()},getTitle:function(){return"Valitut tasot YUI"},getDescription:function(){},getOptions:function(){},setState:function(a){console.log("Tile.setState",this,a)},refresh:function(){var f=this;var a=f.instance;var e=this.container;var d=this.template;var c=a.getSandbox();var g=c.findAllSelectedMapLayers();var b=e.children(".oskari-tile-status");b.empty();b.append("("+g.length+")")}},{protocol:["Oskari.userinterface.Tile"]});